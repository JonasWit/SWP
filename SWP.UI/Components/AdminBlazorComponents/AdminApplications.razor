<div class="section">
    <div class="columns is-0 is-centered">
        <h2>Refresh Exceptions Data</h2>
    </div>
    <div class="columns is-0 is-centered">
        <RadzenButton ButtonStyle="ButtonStyle.Secondary" Click="App.ApplicationsPage.RefreshLog">Refresh</RadzenButton>
    </div>
</div>

<div class="section">
    <div class="columns is-0 is-centered">
        <h2>Recorded Exceptions</h2>
    </div>
    <div class="columns is-0 is-centered">
        <RadzenGrid @ref="App.ApplicationsPage.LogGrid"
                    AllowFiltering="true"
                    AllowPaging="true"
                    PageSize="5"
                    AllowSorting="true"
                    Data="@App.ApplicationsPage.LogRecords"
                    TItem="@LogRecordViewModel"
                    Value="@App.ApplicationsPage.SelectedLogRecord"
                    RowSelect="@(args => App.ApplicationsPage.RowSelected(args))">
            <Columns>
                <RadzenGridColumn TItem="LogRecordViewModel" Property="UserId" Title="User" />
                <RadzenGridColumn TItem="LogRecordViewModel" Property="Message" Title="Message" />
                <RadzenGridColumn TItem="LogRecordViewModel" Property="StackTrace" Title="Stack Trace" />
                <RadzenGridColumn TItem="LogRecordViewModel" Property="Created" Title="Created" />
                <RadzenGridColumn TItem="LogRecordViewModel" Context="um" Bubble="false" Filterable="false" Sortable="false" TextAlign="TextAlign.Center" Width="50px">
                    <Template Context="lr">
                        <RadzenButton ButtonStyle="ButtonStyle.Danger" Icon="close" Size="ButtonSize.Small" Click="@(async args => await App.ApplicationsPage.DeleteLogRecord(lr))">
                        </RadzenButton>
                    </Template>
                </RadzenGridColumn>
            </Columns>
        </RadzenGrid>
    </div>
</div>

@if (App.ApplicationsPage.SelectedLogRecord != null)
{
    <div class="section">
        <div class="columns is-0 is-centered">
            <h2>Exception Message</h2>
        </div>
        <div class="columns is-0 is-centered">
            <p>@App.ApplicationsPage.SelectedLogRecord.Message</p>
        </div>
    </div>
    <div class="section">
        <div class="columns is-0 is-centered">
            <h2>Exception Stack</h2>
        </div>
        <div class="columns is-0 is-centered">
            <p>@App.ApplicationsPage.SelectedLogRecord.StackTrace</p>
        </div>
    </div>
}


<RadzenButton Click="App.ApplicationsPage.TestExceptionThrow">Test Exception</RadzenButton>

